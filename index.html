<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Rock Paper Scissors</title>
  </head>
  <body>
    <script>
      var choices = ['rock', 'paper', 'scissors'];
      function computerPlay() {
        //computer will randomly return one of the choices: rock, paper, or scisscors
        var choice = choices[Math.floor(Math.random() * choices.length)];
        return choice;
      }
      function playRound(playerSelection, computerSelection) {
        //a single round of the game
        if (playerSelection == computerSelection) {
          return "It's a tie";
        } else if (
          (playerSelection == 'rock' && computerSelection == 'paper') ||
          (playerSelection == 'paper' && computerSelection == 'scissors') ||
          (playerSelection == 'scissors' && computerSelection == 'rock')
        ) {
          return (
            'You Lose! ' +
            computerSelection.charAt(0).toUpperCase() +
            computerSelection.substring(1) +
            ' beats ' +
            playerSelection.charAt(0).toUpperCase() +
            playerSelection.substring(1)
          );
        } else {
          return (
            'You Win! ' +
            playerSelection.charAt(0).toUpperCase() +
            playerSelection.substring(1) +
            ' beats ' +
            computerSelection.charAt(0).toUpperCase() +
            computerSelection.substring(1)
          );
        }
      }

      function game() {
        // plays the game
        let rounds = 5;
        var playerScore = 0;
        var computerScore = 0;
        var ties = 0;
        alert("Let's play a game of Rock, Paper, Scissors. Best out of 5");
        for (let i = 0; i < rounds; i++) {
          let player = playerChoice();
          let round = playRound(player, computerPlay());
          if (round.includes('You Win!')) {
            playerScore += 1;
            alert(round);
          } else if (round.includes('You Lose!')) {
            computerScore += 1;
            alert(round);
          } else {
            ties += 1;
            alert(round);
          }
        }
        if (playerScore > computerScore) {
          console.log('You are the winner!!');
        } else if (playerScore == computerScore) {
          console.log('It was a tie');
        } else {
          console.log('You Lost');
        }
        console.log(
          'Player Score: ' +
            playerScore +
            ' | ' +
            'Computer Score: ' +
            computerScore +
            '. There were ' +
            ties +
            'ties/draws in this game.'
        );
      }
      function playerChoice() {
        let player = prompt('Rock, Paper, or Scissors?');
        player = player.toLowerCase();
        while (player != 'rock' && player != 'paper' && player != 'scissors') {
          player = prompt(
            'Invalid: Type Rock, Paper, or Scissors as one of your choices.'
          ).toLowerCase();
        }
        return player;
      }

      game();
    </script>
  </body>
</html>
